#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Checking branch name..."

branch_name="$(git rev-parse --abbrev-ref HEAD)"

# Allowed pattern: TICKET-ID/description (e.g., GEN-1234/awesome-feature)
branch_regex="^([A-Z]+-[0-9]+)\/[a-z0-9._-]+$"

if echo "$branch_name" | grep -Eq "$branch_regex"; then
  echo "âœ… Branch name is valid: $branch_name"
else
  echo "âŒ Invalid branch name: $branch_name"
  echo "ğŸ“‹ Required pattern: TICKET-ID/description"
  echo "âœ¨ Example: GEN-1234/add-user-endpoint"
  exit 1
fi
